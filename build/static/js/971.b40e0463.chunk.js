"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[971],{49971:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var a=s(74165),r=s(15861),c=s(29439),n=s(72791),i=s(28127),l=s(57689),o=s(63924),x=s(11087),u=s(80184);var d=function(e){var t=e.onSearch,s=(0,l.useNavigate)(),a=(0,l.useNavigation)(),r=(0,n.useState)(""),i=(0,c.Z)(r,2),o=i[0],d=i[1],p="submitting"===a.state;return(0,u.jsx)(n.Fragment,{children:(0,u.jsxs)(x.l0,{id:"search-form",onSubmit:function(e){e.preventDefault(),t(o)},children:[(0,u.jsx)("label",{children:"Search the customer"}),(0,u.jsx)("input",{required:!0,name:"customer_name",type:"text",placeholder:"search customer",value:o,onChange:function(e){d(e.target.value)}}),(0,u.jsx)("button",{disabled:p||0===o.length,type:"submit",className:"btn btn-success",children:p?"Searching...":"Search"}),(0,u.jsx)("button",{onClick:function(){s("..")},type:"button",className:"btn btn-dark",children:"Cancel"})]})})};var p=function(e){var t=e.results,s=e.customer;return(0,u.jsx)(n.Fragment,{children:(0,u.jsxs)("div",{className:"max-w-screen-lg mx-auto",children:[(0,u.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:['Search results for "',s,'"']}),(0,u.jsx)("div",{className:"shadow border rounded-md",children:(0,u.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,u.jsx)("thead",{className:"bg-gray-50",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt Number"}),(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer Name"}),(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt Date"}),(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accounted"}),(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Status"}),(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"})]})}),(0,u.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e){return(0,u.jsxs)("tr",{className:"hover:bg-gray-100 transition-colors duration-200",children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,u.jsx)(x.rU,{to:"/receipt/".concat(e.id),children:e.receipt_number})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.customer.customer_name}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.date}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.accounted}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.status}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.customer_balance[0].balance}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.customer_balance[0].paid}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,u.jsx)("button",{className:"btn btn-success",children:(0,u.jsx)(x.rU,{to:"/receipt/".concat(e.id,"/payment"),children:" Pay"})})})]},e.id)}))})]})})]})})};var m=function(){var e=(0,n.useState)([]),t=(0,c.Z)(e,2),s=t[0],x=t[1],m=(0,n.useState)(""),h=(0,c.Z)(m,2),y=h[0],g=h[1],f=(0,l.useNavigate)();function j(){return(j=(0,r.Z)((0,a.Z)().mark((function e(t){var r,c,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,i.bW)(),g(t),e.next=4,fetch("/customer/payment/search/?customer_name="+t,{method:"get",headers:{Authorization:"Bearer "+r,"Access-Control-Allow-Origin":"*"}});case 4:if(404===(c=e.sent).status&&(window.alert("No such customer is available. Please try again!!"),f("./")),c.ok){e.next=8;break}throw(0,o.json)({message:"No such request"},{status:500});case 8:return e.next=10,c.json();case 10:return n=e.sent,x(n),0===n.length&&(window.alert("That customer has no  payments!!"),f("./")),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(d,{onSearch:function(e){return j.apply(this,arguments)}}),s&&(0,u.jsx)(p,{results:s,customer:y})]})}}}]);
//# sourceMappingURL=971.b40e0463.chunk.js.map