{"version":3,"file":"static/js/727.4a393861.chunk.js","mappings":"uPA2EO,SAAeA,EAAO,GAAD,+BA0BzB,8CA1BI,wGAGgE,OAHxCC,EAAO,EAAPA,QAASC,EAAM,EAANA,OAC9BC,GAAQC,EAAAA,EAAAA,MACRC,EAAKH,EAAOG,GACdC,EAAM,qDAAuDD,EAAG,EAAD,OAChDJ,EAAQM,WAAU,OAIpC,OAJKC,EAAI,OAEJC,EAAa,CACfC,OAAQF,EAAKG,IAAI,WACpB,UACsBC,MAAMN,EAAK,CAChCO,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAYZ,EAC3B,8BAA+B,KAEjCa,KAAMC,KAAKC,UAAUT,KACpB,KAAD,GARY,GASU,OATlBU,EAAQ,QASDC,OAAc,0CAClBD,GAAQ,WAEZA,EAASE,GAAG,CAAD,gBAC2B,MAAzCC,OAAOC,MAAM,6BACPC,EAAAA,EAAAA,MAAK,CAAEC,QAAS,4BAA8B,CAAEL,OAAQ,MAAO,KAAD,6BAE/DM,EAAAA,EAAAA,UAAS,aAAW,6CAC5B,sBA5BH,UApEA,SAAmC,GAAuC,IAArCC,EAAI,EAAJA,KAAMC,EAAM,EAANA,OAAQC,EAAQ,EAARA,SAAUC,EAAQ,EAARA,SACnDtB,GAAOuB,EAAAA,EAAAA,iBACPC,GAAaC,EAAAA,EAAAA,iBACbC,GAAWC,EAAAA,EAAAA,eACXC,EAAoC,eAArBJ,EAAWK,MAIlC,OACE,UAAC,IAAK,YACN,eAAIC,UAAU,kDAAiD,SAAC,2BAC/D9B,GAAQA,EAAK+B,SACZ,wBACGC,OAAOC,OAAOjC,EAAK+B,QAAQG,KAAI,SAACC,GAAG,OAClC,wBAAeA,GAANA,EAAe,MAI7BnC,GAAQA,EAAKiB,UAAW,uBAAIjB,EAAKiB,WAClC,UAAC,KAAI,CAACZ,OAAO,OAAM,WACjB,eAAGyB,UAAU,uCAAsC,UAAC,oDACF,yBAAIR,EAAS,IAAEF,EAAQ,WAEzE,eAAGU,UAAU,uCAAsC,UAAC,OAC/C,4BAAQ,aAAiB,IAAET,EAAS,UAAM,4BAAQ,SAAa,KACjEF,MAKH,iBAAKW,UAAU,qBAAoB,WAC3B,kBAAOM,QAAQ,SAASN,UAAU,oDAAmD,SAAC,YAGtF,gBAAKA,UAAU,OAAM,UACnB,qBACEjC,GAAG,SACHwC,KAAK,SACLC,KAAM,EACNR,UAAU,+LACVS,aAAc,QAGlB,cAAGT,UAAU,uCAAsC,SAAC,yCAGtD,iBAAMA,UAAU,6CAA4C,WAClE,mBACAU,KAAK,SACLC,QA5CF,WACEf,EAAS,WACX,EA0CyB,SAEtB,QAGD,mBACAc,KAAK,SACLE,SAAUd,EACVE,UAAU,kNAAiN,SAE1N,gBAOP,C","sources":["components/SupplierPaymentComponents/SupplierPaymentRejectForm.js"],"sourcesContent":["import React from \"react\";\r\nimport { Form, useActionData, useNavigate, useNavigation, json, redirect } from \"react-router-dom\";\r\nimport Modal from \"../UIComponents/Modal\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\n\r\nfunction SupplierPaymentRejectForm({ bank, amount, supplier, currency }) {\r\n    const data = useActionData()\r\n    const navigation = useNavigation();\r\n    const navigate = useNavigate();\r\n    const isSubmitting = navigation.state === \"submitting\";\r\n    function cancelHandler() {\r\n      navigate(\"/payment\");\r\n    }\r\n  return (\r\n    <Modal>\r\n    <h3 className=\"text-base font-semibold leading-7 text-gray-900\">Payment Rejection Form</h3>\r\n    {data && data.errors && (\r\n      <ul>\r\n        {Object.values(data.errors).map((err) => (\r\n          <li key={err}>{err}</li>\r\n        ))}\r\n      </ul>\r\n    )}\r\n    {data && data.message && <p>{data.message}</p>}\r\n    <Form method=\"post\">\r\n      <p className=\"mt-1 text-sm leading-6 text-gray-600\">\r\n        Are you sure you want to reject this payment of <b>{currency} {amount}{\" \"}</b> \r\n      </p>\r\n      <p className=\"mt-1 text-sm leading-6 text-gray-600\">\r\n        To <strong>supplier</strong>:{supplier} from <strong>bank</strong> :\r\n        {bank}\r\n      </p>\r\n\r\n\r\n      \r\n      <div className=\"col-span-full pt-2\">\r\n              <label htmlFor=\"reason\" className=\"block text-sm font-medium leading-6 text-gray-900\">\r\n                Reason\r\n              </label>\r\n              <div className=\"mt-2\">\r\n                <textarea\r\n                  id=\"reason\"\r\n                  name=\"reason\"\r\n                  rows={3}\r\n                  className=\"block w-full rounded-md border-0 py-1.5 text-gray-900  ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n                  defaultValue={''}\r\n                />\r\n              </div>\r\n              <p className=\"mt-3 text-sm leading-6 text-gray-600\">Write the reason for Rejection .</p>\r\n            </div>      \r\n            \r\n            <div  className=\"mt-6 flex items-center justify-end gap-x-6\">\r\n      <button \r\n      type=\"button\" \r\n      onClick={cancelHandler}\r\n\r\n      >\r\n        No\r\n      </button>\r\n      <button \r\n      type=\"submit\" \r\n      disabled={isSubmitting}\r\n      className=\"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\r\n\r\n      >\r\n        Yes\r\n      </button>\r\n      </div>\r\n    </Form>\r\n  </Modal>\r\n  )\r\n}\r\n\r\nexport default SupplierPaymentRejectForm;\r\n\r\nexport async function action({ request, params }) {\r\n    const token = getAuthToken();\r\n    const id = params.id;\r\n    let url = \"https://inentory-test.onrender.com/payment/reject/\" + id;\r\n    const data = await request.formData()\r\n\r\n    const rejectData = {\r\n        reason: data.get('reason')\r\n    }\r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n      body: JSON.stringify(rejectData)\r\n    });\r\n    if (response.status === 400){\r\n      return response\r\n    }\r\n    if (!response.ok) {\r\n      window.alert(\"Failed to reject payment\");\r\n      throw json({ message: \"Failed to reject payment\" }, { status: 500 });\r\n    }\r\n    return redirect(\"/payment\");\r\n  }"],"names":["action","request","params","token","getAuthToken","id","url","formData","data","rejectData","reason","get","fetch","method","headers","Authorization","body","JSON","stringify","response","status","ok","window","alert","json","message","redirect","bank","amount","supplier","currency","useActionData","navigation","useNavigation","navigate","useNavigate","isSubmitting","state","className","errors","Object","values","map","err","htmlFor","name","rows","defaultValue","type","onClick","disabled"],"sourceRoot":""}