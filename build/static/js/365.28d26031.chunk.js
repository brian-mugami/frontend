"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[365],{42365:function(e,t,r){r.r(t),r.d(t,{action:function(){return i}});var n=r(74165),s=r(15861),a=r(55571),o=r(63924),u=r(80184);function i(e){return c.apply(this,arguments)}function c(){return(c=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s,a,u,i,c,f,p,d,g,l,m;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.request,s=new URL(r.url).searchParams,"login"===(a=s.get("mode")||"login")||"register"===a){e.next=5;break}throw(0,o.json)({message:"Route not found."},{status:404});case 5:return e.next=7,r.formData();case 7:if(u=e.sent,i={first_name:u.get("fname"),last_name:u.get("lname"),email:u.get("email"),password1:u.get("password1"),password2:u.get("password2")},c={email:u.get("email"),password:u.get("password")},"login"!==a){e.next=29;break}return e.next=13,fetch("https://inentory-test.onrender.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 13:if(f=e.sent){e.next=16;break}return e.abrupt("return",(0,o.json)({message:"Could not authenticate user"},{status:500}));case 16:if(401!==f.status){e.next=18;break}return e.abrupt("return",f);case 18:return e.next=20,f.json();case 20:return p=e.sent,d=p.access_token,g=p.refresh_token,localStorage.setItem("access_token",d),localStorage.setItem("refresh_token",g),(l=new Date).setHours(l.getHours()+24),localStorage.setItem("expiration",l.toISOString()),e.abrupt("return",(0,o.redirect)("/home"));case 29:if("register"!==a){e.next=40;break}return e.next=32,fetch("https://inentory-test.onrender.com/register/user/admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 32:if(409!==(m=e.sent).status){e.next=35;break}return e.abrupt("return",m);case 35:if(417!==m.status){e.next=37;break}return e.abrupt("return",m);case 37:if(m.ok){e.next=39;break}throw(0,o.json)({message:"Could not register user"},{status:500});case 39:return e.abrupt("return",(0,o.redirect)("/auth/login/admin/kindred?mode=login"));case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=function(){return(0,u.jsx)(a.Z,{})}}}]);
//# sourceMappingURL=365.28d26031.chunk.js.map