{"version":3,"file":"static/js/485.1566546a.chunk.js","mappings":"4OAyDO,SAAeA,EAAO,GAAD,+BA2BzB,8CA3BI,kGAGwC,OAHT,EAAPC,QAASC,EAAM,EAANA,OAC9BC,GAAQC,EAAAA,EAAAA,MACRC,EAAKH,EAAOG,GACdC,EAAM,6BAA+BD,EAAG,EAAD,OAEpBE,MAAMD,EAAK,CAChCE,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAYP,EAC3B,8BAA+B,OAEhC,KAAD,EAPY,GAQU,OARlBQ,EAAQ,QAQDC,OAAc,yCAClBD,GAAQ,UAEO,MAApBA,EAASC,OAAc,0CAClBD,GAAQ,WAEO,MAApBA,EAASC,OAAc,0CAChBD,GAAQ,WAEdA,EAASE,GAAG,CAAD,gBAC4B,MAA1CC,OAAOC,MAAM,8BACPC,EAAAA,EAAAA,MAAK,CAAEC,QAAS,6BAA+B,CAAEL,OAAQ,MAAO,KAAD,6BAEhEM,EAAAA,EAAAA,UAAS,sBAAoB,6CACrC,sBA7BH,UA1CA,WACE,IAAMC,GAAUC,EAAAA,EAAAA,oBAAmB,2BAC7BC,GAAOC,EAAAA,EAAAA,iBACPC,GAAaC,EAAAA,EAAAA,iBACbC,GAAWC,EAAAA,EAAAA,eACXC,EAAoC,eAArBJ,EAAWK,MAIhC,OACE,UAAC,IAAK,YACJ,eAAIC,UAAU,kDAAiD,SAAC,0BAC/DR,GAAQA,EAAKS,SACZ,wBACGC,OAAOC,OAAOX,EAAKS,QAAQG,KAAI,SAACC,GAAG,OAClC,wBAAeA,GAANA,EAAe,MAI7Bb,GAAQA,EAAKJ,UAAW,uBAAII,EAAKJ,WAClC,UAAC,KAAI,CAACT,OAAO,OAAM,WACjB,eAAGqB,UAAU,uCAAsC,UAAC,oDACAV,EAAQgB,SAAU,IACnEhB,EAAQiB,OAAQ,QAEnB,eAAGP,UAAU,uCAAsC,UAAC,SAC7C,4BAAQ,aAAiB,IAAEV,EAAQkB,QAAQC,SAASC,cAAe,IAAI,OACzE,4BAAQ,SAAa,KAAGpB,EAAQqB,QAAQC,iBAE7C,iBAAMZ,UAAU,6CAA4C,WAC5D,mBAAQa,KAAK,SAASC,SAAUhB,EAAa,SAC1CA,EAAe,YAAa,aAE/B,mBAAQe,KAAK,SAASE,QA3B5B,WACEnB,EAAS,oBACX,EAyBmD,SAAC,eAOtD,C","sources":["pages/CustomerPaymentsPage/CustomerPaymentApprovePage.js"],"sourcesContent":["import React from \"react\";\nimport {\n  Form,\n  useActionData,\n  useNavigate,\n  useNavigation,\n  json,\n  redirect,\n  useRouteLoaderData,\n} from \"react-router-dom\";\nimport Modal from \"../../components/UIComponents/Modal\";\nimport { getAuthToken } from \"../../util/Auth\";\n\nfunction CustomerPaymentApprovePage() {\n  const payment = useRouteLoaderData(\"customer-payment-detail\");\n  const data = useActionData();\n  const navigation = useNavigation();\n  const navigate = useNavigate();\n  const isSubmitting = navigation.state === \"submitting\";\n  function cancelHandler() {\n    navigate(\"/customer-payment\");\n  }\n  return (\n    <Modal>\n      <h3 className=\"text-base font-semibold leading-7 text-gray-900\">Payment Approval Form</h3>\n      {data && data.errors && (\n        <ul>\n          {Object.values(data.errors).map((err) => (\n            <li key={err}>{err}</li>\n          ))}\n        </ul>\n      )}\n      {data && data.message && <p>{data.message}</p>}\n      <Form method=\"post\">\n        <p className=\"mt-1 text-sm leading-6 text-gray-600\">\n          Are you sure you want to approve this payment of {payment.currency}{\" \"}\n          {payment.amount}{\" \"}\n        </p>\n        <p className=\"mt-1 text-sm leading-6 text-gray-600\">\n          From <strong>customer</strong>:{payment.receipt.customer.customer_name}{\" \"}\n          To <strong>bank</strong> :{payment.account.account_name}\n        </p>\n        <div  className=\"mt-6 flex items-center justify-end gap-x-6\">\n        <button type=\"submit\" disabled={isSubmitting}>\n          {isSubmitting ? \"Receiving\": \"Receive\"}\n        </button>\n        <button type=\"button\" onClick={cancelHandler}>\n          No\n        </button>\n        </div>\n      </Form>\n    </Modal>\n  );\n}\n\nexport default CustomerPaymentApprovePage;\n\nexport async function action({ request, params }) {\n    const token = getAuthToken();\n    const id = params.id;\n    let url = \"/customer/payment/approve/\" + id;\n  \n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n    });\n    if (response.status === 400){\n      return response\n    }\n    if (response.status === 404){\n      return response\n    }\n    if (response.status === 500){\n        return response\n      }\n    if (!response.ok) {\n      window.alert(\"Failed to approve payment\");\n      throw json({ message: \"Failed to approve payment\" }, { status: 500 });\n    }\n    return redirect(\"/customer-payment\");\n  }"],"names":["action","request","params","token","getAuthToken","id","url","fetch","method","headers","Authorization","response","status","ok","window","alert","json","message","redirect","payment","useRouteLoaderData","data","useActionData","navigation","useNavigation","navigate","useNavigate","isSubmitting","state","className","errors","Object","values","map","err","currency","amount","receipt","customer","customer_name","account","account_name","type","disabled","onClick"],"sourceRoot":""}