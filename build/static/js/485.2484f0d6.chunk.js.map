{"version":3,"file":"static/js/485.2484f0d6.chunk.js","mappings":"uPAyDO,SAAeA,EAAO,GAAD,+BA2BzB,8CA3BI,kGAG4E,OAH7C,EAAPC,QAASC,EAAM,EAANA,OAC9BC,GAAQC,EAAAA,EAAAA,MACRC,EAAKH,EAAOG,GACdC,EAAM,iEAAmED,EAAG,EAAD,OAExDE,MAAMD,EAAK,CAChCE,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAYP,EAC3B,8BAA+B,OAEhC,KAAD,EAPY,GAQU,OARlBQ,EAAQ,QAQDC,OAAc,yCAClBD,GAAQ,UAEO,MAApBA,EAASC,OAAc,0CAClBD,GAAQ,WAEO,MAApBA,EAASC,OAAc,0CAChBD,GAAQ,WAEdA,EAASE,GAAG,CAAD,gBAC4B,MAA1CC,OAAOC,MAAM,8BACPC,EAAAA,EAAAA,MAAK,CAAEC,QAAS,6BAA+B,CAAEL,OAAQ,MAAO,KAAD,6BAEhEM,EAAAA,EAAAA,UAAS,sBAAoB,6CACrC,sBA7BH,UA1CA,WACE,IAAMC,GAAUC,EAAAA,EAAAA,oBAAmB,2BAC7BC,GAAOC,EAAAA,EAAAA,iBACPC,GAAaC,EAAAA,EAAAA,iBACbC,GAAWC,EAAAA,EAAAA,eACXC,EAAoC,eAArBJ,EAAWK,MAIhC,OACE,UAAC,IAAK,YACJ,eAAIC,UAAU,kDAAiD,SAAC,0BAC/DR,GAAQA,EAAKS,SACZ,wBACGC,OAAOC,OAAOX,EAAKS,QAAQG,KAAI,SAACC,GAAG,OAClC,wBAAeA,GAANA,EAAe,MAI7Bb,GAAQA,EAAKJ,UAAW,uBAAII,EAAKJ,WAClC,UAAC,KAAI,CAACT,OAAO,OAAM,WACjB,eAAGqB,UAAU,uCAAsC,UAAC,oDACAV,EAAQgB,SAAU,IACnEhB,EAAQiB,OAAQ,QAEnB,eAAGP,UAAU,uCAAsC,UAAC,SAC7C,4BAAQ,aAAiB,IAAEV,EAAQkB,QAAQC,SAASC,cAAe,IAAI,OACzE,4BAAQ,SAAa,KAAGpB,EAAQqB,QAAQC,iBAE7C,iBAAMZ,UAAU,6CAA4C,WAC5D,mBAAQa,KAAK,SAASC,SAAUhB,EAAa,SAC1CA,EAAe,YAAa,aAE/B,mBAAQe,KAAK,SAASE,QA3B5B,WACEnB,EAAS,KACX,EAyBmD,SAAC,eAOtD,C","sources":["pages/CustomerPaymentsPage/CustomerPaymentApprovePage.js"],"sourcesContent":["import React from \"react\";\r\nimport {\r\n  Form,\r\n  useActionData,\r\n  useNavigate,\r\n  useNavigation,\r\n  json,\r\n  redirect,\r\n  useRouteLoaderData,\r\n} from \"react-router-dom\";\r\nimport Modal from \"../../components/UIComponents/Modal\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\n\r\nfunction CustomerPaymentApprovePage() {\r\n  const payment = useRouteLoaderData(\"customer-payment-detail\");\r\n  const data = useActionData();\r\n  const navigation = useNavigation();\r\n  const navigate = useNavigate();\r\n  const isSubmitting = navigation.state === \"submitting\";\r\n  function cancelHandler() {\r\n    navigate(\"..\");\r\n  }\r\n  return (\r\n    <Modal>\r\n      <h3 className=\"text-base font-semibold leading-7 text-gray-900\">Payment Approval Form</h3>\r\n      {data && data.errors && (\r\n        <ul>\r\n          {Object.values(data.errors).map((err) => (\r\n            <li key={err}>{err}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {data && data.message && <p>{data.message}</p>}\r\n      <Form method=\"post\">\r\n        <p className=\"mt-1 text-sm leading-6 text-gray-600\">\r\n          Are you sure you want to approve this payment of {payment.currency}{\" \"}\r\n          {payment.amount}{\" \"}\r\n        </p>\r\n        <p className=\"mt-1 text-sm leading-6 text-gray-600\">\r\n          From <strong>customer</strong>:{payment.receipt.customer.customer_name}{\" \"}\r\n          To <strong>bank</strong> :{payment.account.account_name}\r\n        </p>\r\n        <div  className=\"mt-6 flex items-center justify-end gap-x-6\">\r\n        <button type=\"submit\" disabled={isSubmitting}>\r\n          {isSubmitting ? \"Receiving\": \"Receive\"}\r\n        </button>\r\n        <button type=\"button\" onClick={cancelHandler}>\r\n          No\r\n        </button>\r\n        </div>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default CustomerPaymentApprovePage;\r\n\r\nexport async function action({ request, params }) {\r\n    const token = getAuthToken();\r\n    const id = params.id;\r\n    let url = \"https://flask-inventory.onrender.com/customer/payment/approve/\" + id;\r\n  \r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n    });\r\n    if (response.status === 400){\r\n      return response\r\n    }\r\n    if (response.status === 404){\r\n      return response\r\n    }\r\n    if (response.status === 500){\r\n        return response\r\n      }\r\n    if (!response.ok) {\r\n      window.alert(\"Failed to approve payment\");\r\n      throw json({ message: \"Failed to approve payment\" }, { status: 500 });\r\n    }\r\n    return redirect(\"/customer-payment\");\r\n  }"],"names":["action","request","params","token","getAuthToken","id","url","fetch","method","headers","Authorization","response","status","ok","window","alert","json","message","redirect","payment","useRouteLoaderData","data","useActionData","navigation","useNavigation","navigate","useNavigate","isSubmitting","state","className","errors","Object","values","map","err","currency","amount","receipt","customer","customer_name","account","account_name","type","disabled","onClick"],"sourceRoot":""}