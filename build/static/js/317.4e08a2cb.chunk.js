"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[317,174],{74174:function(e,t,s){s.r(t),s.d(t,{loader:function(){return h}});var r=s(74165),a=s(15861),n=s(29439),i=s(72791),c=s(57689),l=s(11087),o=s(11226),p=s(28127),u=s(80184);function d(){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,r.Z)().mark((function e(){var t,s,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,p.bW)(),e.next=3,fetch("https://inentory-test.onrender.com/supplier",{method:"get",headers:{Authorization:"Bearer "+t}});case 3:if((s=e.sent).ok){e.next=8;break}throw(0,o.json)({message:"Cant get suppliers"},{status:500});case 8:return e.next=10,s.json();case 10:return a=e.sent,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.defer,e.next=3,d();case 3:return e.t1=e.sent,e.t2={suppliers:e.t1},e.abrupt("return",(0,e.t0)(e.t2));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=function(e){var t=e.onSearch,s=(0,c.useNavigate)(),r=(0,c.useNavigation)(),a=(0,i.useState)(""),p=(0,n.Z)(a,2),d=p[0],x=p[1],h="submitting"===r.state,m=(0,o.useLoaderData)().suppliers;return(0,u.jsx)(i.Fragment,{children:(0,u.jsx)("div",{className:"sm:col-span-4",children:(0,u.jsxs)(l.l0,{id:"search-form",onSubmit:function(e){e.preventDefault(),t(d)},children:[(0,u.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"Search the supplier"}),(0,u.jsx)("input",{required:!0,name:"supplier_name",type:"text",list:"options",className:"block w-half rounded-md border-0 py-1.5 text-gray-900  ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"search supplier",value:d,onChange:function(e){x(e.target.value)}}),(0,u.jsx)("datalist",{id:"options",children:m.map((function(e){return(0,u.jsx)("option",{value:e.supplier_name},e.id)}))}),(0,u.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[(0,u.jsx)("button",{onClick:function(){s("..")},type:"button",className:"text-sm font-semibold leading-6 text-gray-900",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:h||0===d.length,className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Search"})]})]})})})}},74317:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var r=s(74165),a=s(15861),n=s(29439),i=s(72791),c=s(74174),l=s(11087),o=s(80184);var p=function(e){var t=e.results,s=e.supplier;return(0,o.jsxs)("div",{className:"max-w-screen-lg mx-auto",children:[(0,o.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:[' Search results for "',s,'"']}),(0,o.jsx)("div",{className:"shadow border rounded-md",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice Number"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier Name"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice Date"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accounted"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Status"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e){return(0,o.jsxs)("tr",{className:"hover:bg-gray-100 transition-colors duration-200",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,o.jsx)(l.rU,{to:"/invoice/".concat(e.id),children:e.invoice_number})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.supplier.supplier_name}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.date}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.accounted}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.status}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.supplier_balance[0].balance}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.supplier_balance[0].paid}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,o.jsx)("button",{className:"btn btn-success",children:(0,o.jsx)(l.rU,{to:"/invoice/".concat(e.id,"/payment"),children:" Pay"})})})]},e.id)}))})]})})]})},u=s(28127),d=s(57689),x=s(63924);var h=function(){var e=(0,i.useState)([]),t=(0,n.Z)(e,2),s=t[0],l=t[1],h=(0,i.useState)(""),m=(0,n.Z)(h,2),f=m[0],g=m[1],y=(0,d.useNavigate)();function b(){return(b=(0,a.Z)((0,r.Z)().mark((function e(t){var a,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,u.bW)(),g(t),e.next=4,fetch("https://inentory-test.onrender.com/payment/search/?supplier_name="+t,{method:"GET",headers:{Authorization:"Bearer "+a,"Access-Control-Allow-Origin":"*"}});case 4:if(404===(n=e.sent).status&&(window.alert("No such supplier is available. Please try again!!"),y("./")),n.ok){e.next=8;break}throw(0,x.json)({message:"No such request"},{status:500});case 8:return e.next=10,n.json();case 10:return 0===(i=e.sent).length&&(window.alert("No such supplier has a pending payment!"),y("./")),l(i),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(c.default,{onSearch:function(e){return b.apply(this,arguments)}}),s.length>0&&(0,o.jsx)(p,{results:s,supplier:f})]})}}}]);
//# sourceMappingURL=317.4e08a2cb.chunk.js.map