(self.webpackChunkfront=self.webpackChunkfront||[]).push([[3614],{83614:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return m}});var t=s(72791),r=s(29439),n=s(61549),l=s(11226),i=s(45847),d=s(80184);var c=function(e){var a=e.receipts;return(0,d.jsxs)(n.Zb,{className:"max-w-xs",children:[(0,d.jsxs)("div",{className:"flex  space-x-2 ",children:[(0,d.jsx)(n.Dx,{children:"Sales credit"}),(0,d.jsx)(n.JO,{icon:i,variant:"simple",tooltip:"Sales Credit"})]}),(0,d.jsx)(n.aV,{children:a.map((function(e){return(0,d.jsxs)(n.HC,{children:[(0,d.jsx)("span",{children:e.customer_name}),(0,d.jsx)("span",{children:e.total_balance.toLocaleString()})]},e.customer_name)}))})]})};var o=function(e){var a=e.invoices;return(0,d.jsxs)(n.Zb,{className:"max-w-xs",children:[(0,d.jsxs)("div",{className:"flex  space-x-2 ",children:[(0,d.jsx)(n.Dx,{children:"Purchase Credits"}),(0,d.jsx)(n.JO,{icon:i,variant:"simple",tooltip:"Purchase Credit"})]}),(0,d.jsx)(n.aV,{children:a.map((function(e){return(0,d.jsxs)(n.HC,{children:[(0,d.jsx)("span",{children:e.supplier_name}),(0,d.jsx)("span",{children:e.total_balance.toLocaleString()})]},e.supplier_name)}))})]})};var u=function(){var e=(0,l.useRouteLoaderData)("root"),a=(e.suppliers,e.user),s=e.sales,i=e.purchases,u=e.dailySales,m=e.dailyPurchases,x=e.dailyExpenses,y=e.inventoryValue,h=e.monthlySales,N=e.monthlyPurchases,v=e.purchaseCredit,g=e.salesCredit,j=(0,t.useState)([]),p=(0,r.Z)(j,2),S=p[0],f=p[1];(0,t.useEffect)((function(){var e=[{title:"Total Sales Amount",metric:s&&s.Amount?s.Amount.toLocaleString():0,metricPrev:s&&s.Sales?s.Sales.toLocaleString():0,delta:s&&s.Percentage_sales?s.Percentage_sales.toFixed(1):0,deltaType:s&&s.Percentage_sales?s.Percentage_sales<0?"moderateDecrease":"moderateIncrease":"N/A"},{title:"Total Purchase Amount",metric:i&&i.Amount?i.Amount.toLocaleString():0,metricPrev:i&&i.Purchases?i.Purchases.toLocaleString():0,delta:i&&i.Percentage_Purchase?i.Percentage_Purchase.toFixed(1):0,deltaType:i&&i.Percentage_Purchase?i.Percentage_Purchase<0?"moderateDecrease":"moderateIncrease":"N/A"},{title:"Profit Today",metric:(s.Amount-i.Amount).toLocaleString(),metricPrev:i.Purchases.toLocaleString(),delta:((s.Amount-i.Amount)/i.Amount*100).toFixed(1),deltaType:s.Amount-i.Amount<0?"moderateDecrease":"moderateIncrease"}];f(e)}),[i,s,u]);var _=[{name:"Monday",value:isNaN(u.Monday)?0:u.Monday},{name:"Tuesday",value:isNaN(u.Tuesday)?0:u.Tuesday},{name:"Wednesday",value:isNaN(u.Wednesday)?0:u.Wednesday},{name:"Thursday",value:isNaN(u.Thursday)?0:u.Thursday},{name:"Friday",value:isNaN(u.Friday)?0:u.Friday},{name:"Saturday",value:isNaN(u.Saturday)?0:u.Saturday},{name:"Sunday",value:isNaN(u.Sunday)?0:u.Sunday}],P=[{name:"Monday",value:isNaN(m.Monday)?0:m.Monday},{name:"Tuesday",value:isNaN(m.Tuesday)?0:m.Tuesday},{name:"Wednesday",value:isNaN(m.Wednesday)?0:m.Wednesday},{name:"Thursday",value:isNaN(m.Thursday)?0:m.Thursday},{name:"Friday",value:isNaN(m.Friday)?0:m.Friday},{name:"Saturday",value:isNaN(m.Saturday)?0:m.Saturday},{name:"Sunday",value:isNaN(m.Sunday)?0:m.Sunday}],T=[{name:"Monday",value:isNaN(x.Monday)?0:x.Monday},{name:"Tuesday",value:isNaN(x.Tuesday)?0:x.Tuesday},{name:"Wednesday",value:isNaN(x.Wednesday)?0:x.Wednesday},{name:"Thursday",value:isNaN(x.Thursday)?0:x.Thursday},{name:"Friday",value:isNaN(x.Friday)?0:x.Friday},{name:"Saturday",value:isNaN(x.Saturday)?0:x.Saturday},{name:"Sunday",value:isNaN(x.Sunday)?0:x.Sunday}],k=(h.daily_totals.map((function(e){return{date:e.day,PurchasesPerMonth:e.total_amount}})),h.daily_totals.map((function(e,a){return{date:e.day,PurchasesPerMonth:N.daily_totals[a].total_amount,SalesPerMonth:e.total_amount}}))),b=[{category:"Weekly Sales",stat:isNaN(u.total_sales_week)?0:u.total_sales_week,data:_},{category:"Weekly Purchases",stat:isNaN(m.total_purchases_week)?0:m.total_purchases_week,data:P},{category:"Weekly Expenses",stat:isNaN(x.total_expenses_week)?0:x.total_expenses_week,data:T}],C=function(e){return Intl.NumberFormat("us").format(e).toString()};return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"pb-5",children:(0,d.jsx)("header",{className:"  ",children:(0,d.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-6 flex justify-between sm:px-6 lg:px-8",children:(0,d.jsxs)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:["Welcome ",a.first_name," ",a.last_name]})})})}),(0,d.jsx)(n.kC,{children:(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 md:grid-cols-2 gap-x-4 gap-y-4 lg:gap-y-0 mx-4",children:[S.map((function(e){return(0,d.jsxs)(n.Zb,{decoration:"top",decorationColor:"indigo",children:[(0,d.jsx)(n.kC,{alignItems:"start",children:(0,d.jsx)(n.xv,{children:e.title})}),(0,d.jsxs)(n.kC,{justifyContent:"start",alignItems:"baseline",className:"truncate space-x-3",children:[(0,d.jsx)(n.jb,{children:e&&e.metric?"Ksh.".concat(e.metric.toLocaleString()):"N/A"}),(0,d.jsxs)(n.xv,{className:"truncate",children:["Transactions ",e.metricPrev]})]})]},e.title)})),(0,d.jsx)("div",{className:"flex pt-4",children:(0,d.jsxs)(n.Zb,{decoration:"top",decorationColor:"indigo",children:[(0,d.jsx)(n.kC,{alignItems:"start",children:(0,d.jsx)(n.xv,{children:"Inventory value"})}),(0,d.jsxs)(n.kC,{justifyContent:"start",alignItems:"baseline",className:"truncate space-x-3",children:[(0,d.jsx)(n.jb,{children:y&&y.total_value?y.total_value.toLocaleString():0}),(0,d.jsx)(n.xv,{className:"truncate",children:"Transactions "})]})]})})]})}),(0,d.jsx)("div",{}),(0,d.jsx)("div",{className:"pt-10",children:(0,d.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-y-4 lg:gap-y-0 lg:gap-x-4 mx-4",children:b.map((function(e){return(0,d.jsxs)(n.Zb,{children:[(0,d.jsx)(n.Dx,{children:e.category}),(0,d.jsxs)(n.kC,{justifyContent:"start",alignItems:"baseline",className:"space-x-2",children:[(0,d.jsx)(n.jb,{children:e&&e.stat.toLocaleString()}),(0,d.jsx)(n.xv,{children:"Total Amount"})]}),(0,d.jsxs)(n.kC,{className:"mt-6",children:[(0,d.jsx)(n.xv,{children:"Days"}),(0,d.jsx)(n.xv,{className:"text-right",children:"Amount"})]}),(0,d.jsx)(n.$s,{data:e.data,valueFormatter:C,className:"mt-2"})]},e.category)}))})}),(0,d.jsx)("div",{className:" pt-4 mx-4",children:(0,d.jsxs)(n.Zb,{children:[(0,d.jsx)(n.Dx,{children:"Monthly data"}),(0,d.jsx)(n.TH,{className:"h-72 mt-4",data:k,index:"date",categories:["PurchasesPerMonth","SalesPerMonth"],colors:["indigo","cyan"],valueFormatter:C})]})}),(0,d.jsxs)("div",{className:"p-4 grid grid-cols-1 lg:grid-cols-2 gap-y-4",children:[(0,d.jsx)(c,{receipts:g}),(0,d.jsx)(o,{invoices:v})]})]})};var m=function(){return(0,d.jsx)("div",{children:(0,d.jsx)(u,{})})}},45847:function(e,a,s){var t=s(70215).default,r=["title","titleId"],n=s(72791);var l=n.forwardRef((function(e,a){var s=e.title,l=e.titleId,i=t(e,r);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":l},i),s?n.createElement("title",{id:l},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}));e.exports=l}}]);
//# sourceMappingURL=3614.7d0bb5e1.chunk.js.map