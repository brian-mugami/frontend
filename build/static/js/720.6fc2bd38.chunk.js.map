{"version":3,"file":"static/js/720.6fc2bd38.chunk.js","mappings":"kNAoFA,UA9EA,WACI,IAAMA,GAAUC,EAAAA,EAAAA,oBAAmB,kBAC7BC,GAAWC,EAAAA,EAAAA,eAKbC,EAAoC,gBAJrBC,EAAAA,EAAAA,iBAIWC,MAEhC,GAAwBC,EAAAA,EAAAA,UAAS,MAAK,eAA/BC,EAAI,KAAEC,EAAO,KAUdC,EAAY,yCAAG,WAAOC,GAAK,gFAKD,OAJ9BA,EAAMC,iBACAC,GAAQC,EAAAA,EAAAA,OAERC,EAAW,IAAIC,UACZC,OAAO,OAAQT,GAAM,kBAGLU,MAAM,uDAAD,OAAwDlB,EAAQmB,IAAM,CAChGC,OAAQ,OACRC,QAAS,CACPC,cAAe,UAAYT,GAE7BU,KAAMR,IACL,KAAD,EACmB,OAPfS,EAAQ,QAOFC,QACVC,OAAOC,MAAM,qCAEXH,EAASI,GACOF,OAAOG,QAAQ,uEAE/B3B,EAAS,MAGXwB,OAAOC,MAAM,oBACd,kDAECD,OAAOC,MAAM,gBAAgB,EAAD,IAAQ,0DAEzC,gBA7BiB,sCA+BlB,OACE,SAAC,IAAK,WACJ,iBAAMG,SAAUpB,EAAa,UAC3B,iBAAKqB,UAAU,OAAM,WACnB,kBAAOC,QAAQ,mBAAmBD,UAAU,aAAY,UACtD,uBAAG,0BAEL,kBACEE,KAAK,OACLF,UAAU,eACVG,KAAK,OACLf,GAAG,mBACHgB,SAnDe,SAACxB,GACxBF,EAAQE,EAAMyB,OAAOC,MAAM,GAC7B,EAkDUC,UAAQ,KAEV,mBACA,mBAAQC,SAAUnC,EAAc2B,UAAU,kBAAkBG,KAAK,SAAQ,SACvE9B,EAAe,aAAe,YAEhC,mBAAQ2B,UAAU,kBAAkBG,KAAK,SAASM,QAtD1D,WACEtC,EAAS,KACX,EAoDiF,SAAC,iBAOpF,C","sources":["pages/InvoicePages/InvoiceAttachmentPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Modal from \"../../components/UIComponents/Modal\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\nimport { useNavigate, useRouteLoaderData } from \"react-router-dom/dist/umd/react-router-dom.development\";\r\nimport { useNavigation } from \"react-router-dom\";\r\n\r\nfunction InvoiceAttachmentPage() {\r\n    const invoice = useRouteLoaderData(\"invoice-detail\")\r\n    const navigate = useNavigate()\r\n    const navigation = useNavigation()\r\n\r\n\r\n\r\n  const isSubmitting = navigation.state === \"submitting\"\r\n    \r\n  const [file, setFile] = useState(null);\r\n\r\n  const handleFileChange = (event) => {\r\n    setFile(event.target.files[0]);\r\n  };\r\n\r\n  function cancelHandler(){\r\n    navigate(\"..\")\r\n  }\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const token = getAuthToken();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n\r\n    try {\r\n      const response = await fetch(`https://flask-inventory.onrender.com/invoice/upload/${invoice.id}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n        body: formData,\r\n      });\r\n      if(response.status===400){\r\n        window.alert(\"Only PDF attachment are allowed!!\")\r\n      }\r\n      if (response.ok) {\r\n        const confirmed = window.confirm(\"File uploaded successfully! Do you want to go to the invoice page?\");\r\n        if (confirmed) {\r\n          navigate(\"..\");\r\n        }\r\n      } else {\r\n        window.alert(\"failed to upload\");\r\n      }\r\n    } catch (error) {\r\n        window.alert(\"Network error\", error)\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"formFileMultiple\" className=\"form-label\">\r\n            <b>Invoice Attachment</b>\r\n          </label>\r\n          <input\r\n            name=\"file\"\r\n            className=\"form-control\"\r\n            type=\"file\"\r\n            id=\"formFileMultiple\"\r\n            onChange={handleFileChange}\r\n            required\r\n          />\r\n          <br />\r\n          <button disabled={isSubmitting} className=\"btn btn-success\" type=\"submit\">\r\n           {isSubmitting ? \"submitting\" : \"submit\"}\r\n          </button>\r\n          <button className=\"btn btn-warning\" type=\"button\" onClick={cancelHandler}>\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default InvoiceAttachmentPage;\r\n\r\n"],"names":["invoice","useRouteLoaderData","navigate","useNavigate","isSubmitting","useNavigation","state","useState","file","setFile","handleSubmit","event","preventDefault","token","getAuthToken","formData","FormData","append","fetch","id","method","headers","Authorization","body","response","status","window","alert","ok","confirm","onSubmit","className","htmlFor","name","type","onChange","target","files","required","disabled","onClick"],"sourceRoot":""}