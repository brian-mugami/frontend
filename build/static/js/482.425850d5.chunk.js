"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[482],{74482:function(e,r,t){t.r(r),t.d(r,{action:function(){return d}});var n=t(74165),s=t(15861),a=t(72791),i=t(11226),o=t(31084),u=t(28127),c=t(80184);function d(e){return l.apply(this,arguments)}function l(){return(l=(0,s.Z)((0,n.Z)().mark((function e(r){var t,s,a,o,c,d,l,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.request,s=r.params,a=(0,u.bW)(),o=s.id,c="/receipt/void/"+o,e.next=6,t.formData();case 6:return d=e.sent,l={reason:d.get("reason")},e.next=10,fetch(c,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a,"Access-Control-Allow-Origin":"*"},body:JSON.stringify(l)});case 10:if(400!==(p=e.sent).status){e.next=13;break}return e.abrupt("return",p);case 13:if(404!==p.status){e.next=15;break}return e.abrupt("return",p);case 15:if(p.ok){e.next=17;break}throw(0,i.json)({message:"Failed to void receipt"},{status:500});case 17:return e.abrupt("return",(0,i.redirect)("/receipt"));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.default=function(){var e=(0,i.useRouteLoaderData)("receipt-detail"),r=(0,i.useNavigation)(),t=(0,i.useNavigate)(),n=(0,i.useActionData)(),s="submitting"===r.state;return(0,c.jsx)(a.Fragment,{children:(0,c.jsxs)(o.Z,{children:[n&&n.errors&&(0,c.jsx)("ul",{children:Object.values(n.errors).map((function(e){return(0,c.jsx)("li",{children:e},e)}))}),n&&n.message&&(0,c.jsx)("p",{children:n.message}),(0,c.jsxs)(i.Form,{method:"post",children:[(0,c.jsxs)("div",{children:["Are you sure you want to void receipt number"," ",(0,c.jsx)("b",{children:e.receipt_number})," of amount"," ",(0,c.jsxs)("b",{children:[e.currency," ",e.amount]})]}),(0,c.jsx)("div",{children:(0,c.jsx)("input",{required:!0,placeholder:"Void Reason",name:"reason"})}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:function(){t("..")},children:"No"})," ",(0,c.jsx)("button",{className:"btn btn-secondary",type:"submit",disabled:s,children:s?"Voiding":"Void"})]})]})})}}}]);
//# sourceMappingURL=482.425850d5.chunk.js.map