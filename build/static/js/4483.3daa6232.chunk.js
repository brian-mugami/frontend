"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[4483],{34483:function(e,s,t){t.r(s),t.d(s,{action:function(){return g}});var r=t(74165),n=t(15861),a=t(29439),i=t(72791),l=t(57689),o=t(11087),d=t(63924),u=t(28127),m=t(30969),c=t(80184);function g(e){return x.apply(this,arguments)}function x(){return(x=(0,n.Z)((0,r.Z)().mark((function e(s){var t,n,a,i,l,o,m,c,g;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.request,n=s.params,e.next=3,t.formData();case 3:if(a=e.sent,i=t.method,l=(0,u.getAuthToken)(),o=n.userId,m={first_name:a.get("fname"),last_name:a.get("lname"),email:a.get("email"),is_admin:a.get("is-admin"),password1:a.get("password1"),password2:a.get("password2")},"POST"!==i){e.next=23;break}return e.next=11,fetch("/user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+l,"Access-Control-Allow-Origin":"*"},body:JSON.stringify(m)});case 11:if(409!==(c=e.sent).status){e.next=14;break}return e.abrupt("return",c);case 14:if(417!==c.status){e.next=16;break}return e.abrupt("return",c);case 16:if(400!==c.status){e.next=18;break}return e.abrupt("return",c);case 18:if(c.ok){e.next=20;break}throw(0,d.json)({message:"Could not create user"},{status:500});case 20:case 35:return e.abrupt("return",(0,d.redirect)("/user"));case 23:if("PATCH"!==i){e.next=36;break}return e.next=26,fetch("/user/"+o,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+l,"Access-Control-Allow-Origin":"*"},body:JSON.stringify(m)});case 26:if(409!==(g=e.sent).status){e.next=29;break}return e.abrupt("return",g);case 29:if(417!==g.status){e.next=31;break}return e.abrupt("return",g);case 31:if(400!==g.status){e.next=33;break}return e.abrupt("return",g);case 33:if(g.ok){e.next=35;break}throw(0,d.json)({message:"Could not update user"},{status:500});case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.default=function(e){var s=e.user,t=e.method,r=(0,l.useActionData)(),n=(0,l.useNavigation)(),d=(0,l.useNavigate)(),u=(0,i.useState)(null),g=(0,a.Z)(u,2),x=(g[0],g[1],"submitting"===n.state);return(0,c.jsx)(i.Fragment,{children:(0,c.jsxs)("div",{className:"p-5",children:[r&&r.errors&&(0,c.jsx)("ul",{children:Object.values(r.errors).map((function(e){return(0,c.jsx)("li",{children:e},e)}))}),r&&r.message&&(0,c.jsx)("p",{children:r.message}),(0,c.jsxs)(o.l0,{method:t,children:[x&&(0,c.jsx)("p",{children:"Submitting..."}),(0,c.jsx)("label",{className:"block text-sm my-2 font-medium leading-6 text-gray-900",children:"First name"}),(0,c.jsx)("input",{id:"fname",type:"text",name:"fname",required:!0,defaultValue:s?s.first_name:"",className:"block w-1/2 rounded-md border-0 py-1.5 text-gray-900  ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,c.jsx)("label",{className:"block text-sm my-2 font-medium leading-6 text-gray-900",children:"Last name"}),(0,c.jsx)("input",{id:"lname",type:"text",name:"lname",required:!0,defaultValue:s?s.last_name:"",className:"block w-1/2 rounded-md border-0 py-1.5 text-gray-900  ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,c.jsx)("label",{className:"block text-sm my-2 font-medium leading-6 text-gray-900",children:"email"}),(0,c.jsx)("input",{id:"fname",type:"email",name:"email",required:!0,defaultValue:s?s.email:"",className:"block w-3/4 rounded-md border-0 py-1.5 text-gray-900  ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"password1",className:"block text-sm font-medium leading-6 text-gray-900",children:"Set password"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",required:!0,name:"password1",id:"password1",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"sm:col-span-3",children:[(0,c.jsx)("label",{htmlFor:"password2",className:"block text-sm font-medium leading-6 text-gray-900",children:"Confirm password"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("input",{type:"text",name:"password2",required:!0,id:"password2",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,c.jsxs)("div",{className:"",children:[(0,c.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"User Type"}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("select",{name:"is-admin",type:"text",defaultValue:s&&!0===s.is_admin?"Admin":"User",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6",children:m.vf.map((function(e){return(0,c.jsxs)("option",{value:e.value,children:[" ",e.userType]},e.id)}))})})]}),(0,c.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6 ",children:[(0,c.jsx)("button",{type:"button",onClick:function(){d("/user")},className:"text-sm font-semibold leading-6 text-gray-900",children:"Cancel"}),(0,c.jsx)("button",{type:"submit",disabled:x,className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white  hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:x?"Saving..":"Save"})]})]})]})})}}}]);
//# sourceMappingURL=4483.3daa6232.chunk.js.map