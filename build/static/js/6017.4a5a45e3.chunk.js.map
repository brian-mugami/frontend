{"version":3,"file":"static/js/6017.4a5a45e3.chunk.js","mappings":"kOAgDO,SAAeA,EAAO,GAAD,+BAyB3B,8CAzBM,sGAAqC,OAAdC,EAAO,EAAPA,QAAQC,EAAM,EAANA,OAAM,SACrBD,EAAQE,WAAU,OAKpC,OALKC,EAAI,OACJC,EAAKH,EAAOG,GACZC,GAAQC,EAAAA,EAAAA,gBACRC,EAAa,CACfC,OAASL,EAAKM,IAAI,WACrB,SAEsBC,MAAM,qEAAqEN,EAAI,CAClGO,OAAQ,OACRC,QAAS,CACL,eAAgB,mBAChBC,cAAe,UAAYR,EAC3B,8BAA+B,KAEnCS,KAAMC,KAAKC,UAAUT,KACvB,OARY,GAUS,OAVjBU,EAAQ,QAUFC,OAAc,0CACfD,GAAQ,WAEfA,EAASE,GAAG,CAAC,EAAF,oBACLC,EAAAA,EAAAA,MAAK,CAACC,QAAS,6BAA8BH,OAAQ,MAAK,kCAE7DI,EAAAA,EAAAA,UAAS,sBAAoB,6CACvC,sBA3BD,UAzCA,WACI,IAAMC,GAAWC,EAAAA,EAAAA,oBAAmB,2BAC9BrB,GAAOsB,EAAAA,EAAAA,iBACPC,GAAaC,EAAAA,EAAAA,iBACbC,GAAWC,EAAAA,EAAAA,eACXC,EAAoC,eAArBJ,EAAWK,MAIlC,OACE,UAAC,IAAK,YACN,eAAIC,UAAU,kDAAiD,SAAC,0BAC/D7B,GAAQA,EAAK8B,SACZ,wBACGC,OAAOC,OAAOhC,EAAK8B,QAAQG,KAAI,SAACC,GAAG,OAClC,wBAAeA,GAANA,EAAe,MAI7BlC,GAAQA,EAAKkB,UAAW,uBAAIlB,EAAKkB,WAClC,UAAC,EAAAiB,KAAI,CAAC3B,OAAO,OAAM,WACjB,eAAGqB,UAAU,uCAAsC,UAAC,oDACF,yBAAIT,EAAQgB,SAAS,IAAEhB,EAAQiB,OAAQ,WAEzF,eAAGR,UAAU,uCAAsC,UAAC,SAC7C,4BAAQ,aAAiB,IAAET,EAAQkB,QAAQC,SAASC,cAAc,QAAI,uBAAIpB,EAAQqB,QAAQC,mBAEjG,kBAAOC,KAAK,SAASC,KAAK,OAAOC,YAAY,SAASC,UAAQ,KAC9D,iBAAMjB,UAAU,6CAA4C,WAC5D,mBAAQe,KAAK,SAASG,SAAUpB,EAAa,SAAC,SAG9C,mBAAQiB,KAAK,SAASI,QA1BxB,WACEvB,EAAS,oBACX,EAwB+C,SAAC,eAOpD,C","sources":["pages/CustomerPaymentsPage/CustomerPaymentRejectPage.js"],"sourcesContent":["import React from 'react'\r\nimport { Form, json, redirect, useActionData, useNavigate, useNavigation, useRouteLoaderData } from 'react-router-dom/dist/umd/react-router-dom.development'\r\nimport { getAuthToken } from '../../util/Auth'\r\nimport Modal from '../../components/UIComponents/Modal'\r\n\r\nfunction CustomerPaymentRejectPage() {\r\n    const payment  = useRouteLoaderData(\"customer-payment-detail\")\r\n    const data = useActionData()\r\n    const navigation = useNavigation();\r\n    const navigate = useNavigate();\r\n    const isSubmitting = navigation.state === \"submitting\";\r\n    function cancelHandler() {\r\n      navigate(\"/customer-payment\");\r\n    }\r\n  return (\r\n    <Modal>\r\n    <h3 className=\"text-base font-semibold leading-7 text-gray-900\">Payment Approval Form</h3>\r\n    {data && data.errors && (\r\n      <ul>\r\n        {Object.values(data.errors).map((err) => (\r\n          <li key={err}>{err}</li>\r\n        ))}\r\n      </ul>\r\n    )}\r\n    {data && data.message && <p>{data.message}</p>}\r\n    <Form method=\"post\">\r\n      <p className=\"mt-1 text-sm leading-6 text-gray-600\">\r\n        Are you sure you want to reject this payment of <b>{payment.currency} {payment.amount}{\" \"}</b> \r\n      </p>\r\n      <p className=\"mt-1 text-sm leading-6 text-gray-600\">\r\n        from <strong>customer</strong>:{payment.receipt.customer.customer_name} to <b>{payment.account.account_name}</b>\r\n      </p>\r\n      <input name=\"reason\" type=\"text\" placeholder=\"reason\" required></input>\r\n      <div  className=\"mt-6 flex items-center justify-end gap-x-6\">\r\n      <button type=\"submit\" disabled={isSubmitting}>\r\n        Yes\r\n      </button>\r\n      <button type=\"button\" onClick={cancelHandler}>\r\n        No\r\n      </button>\r\n      </div>\r\n    </Form>\r\n  </Modal>\r\n  )\r\n}\r\n\r\nexport default CustomerPaymentRejectPage\r\n\r\nexport async function action({request,params}){\r\n    const data = await request.formData()\r\n    const id = params.id\r\n    const token = getAuthToken()\r\n    const rejectData = {\r\n        reason : data.get(\"reason\")\r\n    }\r\n\r\n    const response = await fetch('https://inventory-accounting.onrender.com/customer/payment/reject/'+id, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: \"Bearer \" + token,\r\n            \"Access-Control-Allow-Origin\": \"*\",\r\n        },\r\n        body: JSON.stringify(rejectData)\r\n    })\r\n\r\n    if(response.status === 400){\r\n        return response\r\n    }\r\n    if(!response.ok){\r\n        throw json({message: \"Can not reject the payment\", status: 400})\r\n    }\r\n    return redirect('/customer-payment')\r\n}"],"names":["action","request","params","formData","data","id","token","getAuthToken","rejectData","reason","get","fetch","method","headers","Authorization","body","JSON","stringify","response","status","ok","json","message","redirect","payment","useRouteLoaderData","useActionData","navigation","useNavigation","navigate","useNavigate","isSubmitting","state","className","errors","Object","values","map","err","Form","currency","amount","receipt","customer","customer_name","account","account_name","name","type","placeholder","required","disabled","onClick"],"sourceRoot":""}