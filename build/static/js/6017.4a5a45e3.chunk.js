"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[6017],{66017:function(e,t,n){n.r(t),n.d(t,{action:function(){return u}});var r=n(74165),s=n(15861),a=(n(72791),n(11226)),o=n(28127),c=n(31084),i=n(80184);function u(e){return m.apply(this,arguments)}function m(){return(m=(0,s.Z)((0,r.Z)().mark((function e(t){var n,s,c,i,u,m,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.request,s=t.params,e.next=3,n.formData();case 3:return c=e.sent,i=s.id,u=(0,o.getAuthToken)(),m={reason:c.get("reason")},e.next=9,fetch("https://inventory-accounting.onrender.com/customer/payment/reject/"+i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+u,"Access-Control-Allow-Origin":"*"},body:JSON.stringify(m)});case 9:if(400!==(l=e.sent).status){e.next=12;break}return e.abrupt("return",l);case 12:if(l.ok){e.next=14;break}throw(0,a.json)({message:"Can not reject the payment",status:400});case 14:return e.abrupt("return",(0,a.redirect)("/customer-payment"));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=function(){var e=(0,a.useRouteLoaderData)("customer-payment-detail"),t=(0,a.useActionData)(),n=(0,a.useNavigation)(),r=(0,a.useNavigate)(),s="submitting"===n.state;return(0,i.jsxs)(c.Z,{children:[(0,i.jsx)("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"Payment Approval Form"}),t&&t.errors&&(0,i.jsx)("ul",{children:Object.values(t.errors).map((function(e){return(0,i.jsx)("li",{children:e},e)}))}),t&&t.message&&(0,i.jsx)("p",{children:t.message}),(0,i.jsxs)(a.Form,{method:"post",children:[(0,i.jsxs)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:["Are you sure you want to reject this payment of ",(0,i.jsxs)("b",{children:[e.currency," ",e.amount," "]})]}),(0,i.jsxs)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:["from ",(0,i.jsx)("strong",{children:"customer"}),":",e.receipt.customer.customer_name," to ",(0,i.jsx)("b",{children:e.account.account_name})]}),(0,i.jsx)("input",{name:"reason",type:"text",placeholder:"reason",required:!0}),(0,i.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[(0,i.jsx)("button",{type:"submit",disabled:s,children:"Yes"}),(0,i.jsx)("button",{type:"button",onClick:function(){r("/customer-payment")},children:"No"})]})]})]})}}}]);
//# sourceMappingURL=6017.4a5a45e3.chunk.js.map