{"version":3,"file":"static/js/727.cc0a6a8f.chunk.js","mappings":"2OAgDO,SAAeA,EAAO,GAAD,+BA0BzB,8CA1BI,wGAG8B,OAHNC,EAAO,EAAPA,QAASC,EAAM,EAANA,OAC9BC,GAAQC,EAAAA,EAAAA,MACRC,EAAKH,EAAOG,GACdC,EAAM,mBAAqBD,EAAG,EAAD,OACdJ,EAAQM,WAAU,OAIpC,OAJKC,EAAI,OAEJC,EAAa,CACfC,OAAQF,EAAKG,IAAI,WACpB,UACsBC,MAAMN,EAAK,CAChCO,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAYZ,EAC3B,8BAA+B,KAEjCa,KAAMC,KAAKC,UAAUT,KACpB,KAAD,GARY,GASU,OATlBU,EAAQ,QASDC,OAAc,0CAClBD,GAAQ,WAEZA,EAASE,GAAG,CAAD,gBAC2B,MAAzCC,OAAOC,MAAM,6BACPC,EAAAA,EAAAA,MAAK,CAAEC,QAAS,4BAA8B,CAAEL,OAAQ,MAAO,KAAD,6BAE/DM,EAAAA,EAAAA,UAAS,aAAW,6CAC5B,sBA5BH,UAzCA,SAAmC,GAAuC,IAArCC,EAAI,EAAJA,KAAMC,EAAM,EAANA,OAAQC,EAAQ,EAARA,SAAUC,EAAQ,EAARA,SACnDtB,GAAOuB,EAAAA,EAAAA,iBACPC,GAAaC,EAAAA,EAAAA,iBACbC,GAAWC,EAAAA,EAAAA,eACXC,EAAoC,eAArBJ,EAAWK,MAIlC,OACE,UAAC,IAAK,YACN,eAAIC,UAAU,kDAAiD,SAAC,0BAC/D9B,GAAQA,EAAK+B,SACZ,wBACGC,OAAOC,OAAOjC,EAAK+B,QAAQG,KAAI,SAACC,GAAG,OAClC,wBAAeA,GAANA,EAAe,MAI7BnC,GAAQA,EAAKiB,UAAW,uBAAIjB,EAAKiB,WAClC,UAAC,KAAI,CAACZ,OAAO,OAAM,WACjB,eAAGyB,UAAU,uCAAsC,UAAC,oDACF,yBAAIR,EAAS,IAAEF,EAAQ,WAEzE,eAAGU,UAAU,uCAAsC,UAAC,OAC/C,4BAAQ,aAAiB,IAAET,EAAS,UAAM,4BAAQ,SAAa,KACjEF,MAEH,kBAAOiB,KAAK,SAASC,KAAK,OAAOC,YAAY,SAASC,UAAQ,KAC9D,iBAAMT,UAAU,6CAA4C,WAC5D,mBAAQO,KAAK,SAASG,SAAUZ,EAAa,SAAC,SAG9C,mBAAQS,KAAK,SAASI,QA3BxB,WACEf,EAAS,WACX,EAyB+C,SAAC,eAOpD,C","sources":["components/SupplierPaymentComponents/SupplierPaymentRejectForm.js"],"sourcesContent":["import React from \"react\";\nimport { Form, useActionData, useNavigate, useNavigation, json, redirect } from \"react-router-dom\";\nimport Modal from \"../UIComponents/Modal\";\nimport { getAuthToken } from \"../../util/Auth\";\n\nfunction SupplierPaymentRejectForm({ bank, amount, supplier, currency }) {\n    const data = useActionData()\n    const navigation = useNavigation();\n    const navigate = useNavigate();\n    const isSubmitting = navigation.state === \"submitting\";\n    function cancelHandler() {\n      navigate(\"/payment\");\n    }\n  return (\n    <Modal>\n    <h3 className=\"text-base font-semibold leading-7 text-gray-900\">Payment Approval Form</h3>\n    {data && data.errors && (\n      <ul>\n        {Object.values(data.errors).map((err) => (\n          <li key={err}>{err}</li>\n        ))}\n      </ul>\n    )}\n    {data && data.message && <p>{data.message}</p>}\n    <Form method=\"post\">\n      <p className=\"mt-1 text-sm leading-6 text-gray-600\">\n        Are you sure you want to reject this payment of <b>{currency} {amount}{\" \"}</b> \n      </p>\n      <p className=\"mt-1 text-sm leading-6 text-gray-600\">\n        To <strong>supplier</strong>:{supplier} from <strong>bank</strong> :\n        {bank}\n      </p>\n      <input name=\"reason\" type=\"text\" placeholder=\"reason\" required></input>\n      <div  className=\"mt-6 flex items-center justify-end gap-x-6\">\n      <button type=\"submit\" disabled={isSubmitting}>\n        Yes\n      </button>\n      <button type=\"button\" onClick={cancelHandler}>\n        No\n      </button>\n      </div>\n    </Form>\n  </Modal>\n  )\n}\n\nexport default SupplierPaymentRejectForm;\n\nexport async function action({ request, params }) {\n    const token = getAuthToken();\n    const id = params.id;\n    let url = \"/payment/reject/\" + id;\n    const data = await request.formData()\n\n    const rejectData = {\n        reason: data.get('reason')\n    }\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n      body: JSON.stringify(rejectData)\n    });\n    if (response.status === 400){\n      return response\n    }\n    if (!response.ok) {\n      window.alert(\"Failed to reject payment\");\n      throw json({ message: \"Failed to reject payment\" }, { status: 500 });\n    }\n    return redirect(\"/payment\");\n  }"],"names":["action","request","params","token","getAuthToken","id","url","formData","data","rejectData","reason","get","fetch","method","headers","Authorization","body","JSON","stringify","response","status","ok","window","alert","json","message","redirect","bank","amount","supplier","currency","useActionData","navigation","useNavigation","navigate","useNavigate","isSubmitting","state","className","errors","Object","values","map","err","name","type","placeholder","required","disabled","onClick"],"sourceRoot":""}