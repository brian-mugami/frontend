"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[317,174],{74174:function(e,t,s){s.r(t),s.d(t,{loader:function(){return h}});var r=s(74165),a=s(15861),n=s(29439),c=s(72791),i=s(57689),p=s(11087),l=s(11226),u=s(28127),o=s(80184);function d(){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,r.Z)().mark((function e(){var t,s,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,u.bW)(),e.next=3,fetch("/supplier",{method:"get",headers:{Authorization:"Bearer "+t}});case 3:if((s=e.sent).ok){e.next=8;break}throw(0,l.json)({message:"Cant get suppliers"},{status:500});case 8:return e.next=10,s.json();case 10:return a=e.sent,console.log(a),e.abrupt("return",a);case 13:case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l.defer,e.next=3,d();case 3:return e.t1=e.sent,e.t2={suppliers:e.t1},e.abrupt("return",(0,e.t0)(e.t2));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=function(e){var t=e.onSearch,s=(0,i.useNavigate)(),r=(0,i.useNavigation)(),a=(0,c.useState)(""),u=(0,n.Z)(a,2),d=u[0],x=u[1],h="submitting"===r.state,m=(0,l.useLoaderData)().suppliers;return(0,o.jsx)(c.Fragment,{children:(0,o.jsxs)(p.l0,{id:"search-form",onSubmit:function(e){e.preventDefault(),t(d)},children:[(0,o.jsx)("label",{children:"Search the supplier"}),(0,o.jsx)("input",{required:!0,name:"supplier_name",type:"text",list:"options",placeholder:"search supplier",value:d,onChange:function(e){x(e.target.value)}}),(0,o.jsx)("datalist",{id:"options",children:m.map((function(e){return(0,o.jsx)("option",{value:e.supplier_name},e.id)}))}),(0,o.jsx)("button",{disabled:h||0===d.length,type:"submit",className:"btn btn-success",children:"Search"}),(0,o.jsx)("button",{onClick:function(){s("..")},type:"button",className:"btn btn-dark",children:"Cancel"})]})})}},74317:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var r=s(74165),a=s(15861),n=s(29439),c=s(72791),i=s(74174),p=s(11087),l=s(80184);var u=function(e){var t=e.results,s=e.supplier;return(0,l.jsxs)("div",{className:"max-w-screen-lg mx-auto",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:[' Search results for "',s,'"']}),(0,l.jsx)("div",{className:"shadow border rounded-md",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice Number"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier Name"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice Date"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accounted"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Status"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e){return(0,l.jsxs)("tr",{className:"hover:bg-gray-100 transition-colors duration-200",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,l.jsx)(p.rU,{to:"/invoice/".concat(e.id),children:e.invoice_number})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.supplier.supplier_name}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.date}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.accounted}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.status}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.supplier_balance[0].balance}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.supplier_balance[0].paid}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,l.jsx)("button",{className:"btn btn-success",children:(0,l.jsx)(p.rU,{to:"/invoice/".concat(e.id,"/payment"),children:" Pay"})})})]},e.id)}))})]})})]})},o=s(28127),d=s(57689),x=s(63924);var h=function(){var e=(0,c.useState)([]),t=(0,n.Z)(e,2),s=t[0],p=t[1],h=(0,c.useState)(""),m=(0,n.Z)(h,2),f=m[0],y=m[1],g=(0,d.useNavigate)();function w(){return(w=(0,a.Z)((0,r.Z)().mark((function e(t){var a,n,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,o.bW)(),y(t),e.next=4,fetch("https://flask-inventory.onrender.com/payment/search/?supplier_name="+t,{method:"GET",headers:{Authorization:"Bearer "+a,"Access-Control-Allow-Origin":"*"}});case 4:if(404===(n=e.sent).status&&(window.alert("No such supplier is available. Please try again!!"),g("./")),n.ok){e.next=8;break}throw(0,x.json)({message:"No such request"},{status:500});case 8:return e.next=10,n.json();case 10:return 0===(c=e.sent).length&&(window.alert("No such supplier has a pending payment!"),g("./")),p(c),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,l.jsxs)(c.Fragment,{children:[(0,l.jsx)(i.default,{onSearch:function(e){return w.apply(this,arguments)}}),s.length>0&&(0,l.jsx)(u,{results:s,supplier:f})]})}}}]);
//# sourceMappingURL=317.5ab169b5.chunk.js.map