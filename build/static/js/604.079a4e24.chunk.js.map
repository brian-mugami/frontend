{"version":3,"file":"static/js/604.079a4e24.chunk.js","mappings":"iOA2DO,SAAeA,EAAO,GAAD,+BA8B3B,8CA9BM,wGAG4B,OAHJC,EAAO,EAAPA,QAASC,EAAM,EAANA,OAChCC,GAAQC,EAAAA,EAAAA,MACRC,EAAKH,EAAOG,GACZC,EAAM,iBAAmBD,EAAG,EAAD,OAEdJ,EAAQM,WAAU,OAIpC,OAJKC,EAAI,OAEJC,EAAW,CACfC,OAAQF,EAAKG,IAAI,WAClB,UACsBC,MAAMN,EAAK,CAChCO,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAYZ,EAC3B,8BAA+B,KAEjCa,KAAMC,KAAKC,UAAUT,KACpB,KAAD,GARY,GAUU,OAVlBU,EAAQ,QAUDC,OAAc,0CAClBD,GAAQ,WAEO,MAApBA,EAASC,OAAc,0CAClBD,GAAQ,WAEZA,EAASE,GAAG,CAAD,sBACRC,EAAAA,EAAAA,MAAK,CAAEC,QAAS,0BAA4B,CAAEH,OAAQ,MAAO,KAAD,6BAE7DI,EAAAA,EAAAA,UAAS,aAAW,6CAC5B,sBAhCD,UA7CA,SAAyB,GAAc,IAAZC,EAAO,EAAPA,QACnBC,GAAaC,EAAAA,EAAAA,iBACbC,GAAWC,EAAAA,EAAAA,eACXrB,GAAOsB,EAAAA,EAAAA,iBAEPC,EAAoC,eAArBL,EAAWM,MAIhC,OACE,UAAC,IAAK,WACHxB,GAAQA,EAAKyB,SACZ,wBACGC,OAAOC,OAAO3B,EAAKyB,QAAQG,KAAI,SAACC,GAAG,OAClC,wBAAeA,GAANA,EAAe,MAI7B7B,GAAQA,EAAKe,UAAW,uBAAIf,EAAKe,WAClC,UAAC,EAAAe,KAAI,CAACzB,OAAO,OAAM,WACjB,2BAAK,+CAC0C,KAC7C,uBAAIY,EAAQc,iBAAmB,aAAW,KAC1C,yBACGd,EAAQe,SAAS,IAAEf,EAAQgB,cAGhC,0BACE,kBAAOC,UAAQ,EAACC,YAAY,cAAcC,KAAK,cAEjD,mBAAQC,UAAU,kBAAkBC,QAxB1C,WACElB,EAAS,KACX,EAsBiE,SAAC,OAElD,KACV,mBACEiB,UAAU,oBACVE,KAAK,SACLC,SAAUjB,EAAa,SAEtBA,EAAe,UAAY,cAKtC,C","sources":["components/InvoiceComponents/InvoiceVoidForm.js"],"sourcesContent":["import React from \"react\";\r\nimport Modal from \"../UIComponents/Modal\";\r\nimport {\r\n  Form,\r\n  json,\r\n  redirect,\r\n  useActionData,\r\n  useNavigate,\r\n  useNavigation,\r\n} from \"react-router-dom/dist/umd/react-router-dom.development\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\n\r\nfunction InvoiceVoidForm({ invoice }) {\r\n  const navigation = useNavigation();\r\n  const navigate = useNavigate();\r\n  const data = useActionData();\r\n\r\n  const isSubmitting = navigation.state === \"submitting\";\r\n  function cancelHandler() {\r\n    navigate(\"..\");\r\n  }\r\n  return (\r\n    <Modal>\r\n      {data && data.errors && (\r\n        <ul>\r\n          {Object.values(data.errors).map((err) => (\r\n            <li key={err}>{err}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {data && data.message && <p>{data.message}</p>}\r\n      <Form method=\"post\">\r\n        <div>\r\n          Are you sure you want to void invoice number{\" \"}\r\n          <b>{invoice.invoice_number}</b> of amount{\" \"}\r\n          <b>\r\n            {invoice.currency} {invoice.amount}\r\n          </b>\r\n        </div>\r\n        <div>\r\n          <input required placeholder=\"Void Reason\" name=\"reason\"></input>\r\n        </div>\r\n        <button className=\"btn btn-primary\" onClick={cancelHandler}>\r\n          No\r\n        </button>{\" \"}\r\n        <button\r\n          className=\"btn btn-secondary\"\r\n          type=\"submit\"\r\n          disabled={isSubmitting}\r\n        >\r\n          {isSubmitting ? \"Voiding\" : \"Void\"}\r\n        </button>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default InvoiceVoidForm;\r\n\r\nexport async function action({ request, params }) {\r\n  const token = getAuthToken();\r\n  const id = params.id;\r\n  const url = \"/invoice/void/\" + id;\r\n\r\n  const data = await request.formData()\r\n\r\n  const voidData = {\r\n    reason: data.get('reason')\r\n  }\r\n  const response = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: \"Bearer \" + token,\r\n      \"Access-Control-Allow-Origin\": \"*\",\r\n    },\r\n    body: JSON.stringify(voidData)\r\n  });\r\n\r\n  if (response.status === 400) {\r\n    return response;\r\n  }\r\n  if (response.status === 404) {\r\n    return response;\r\n  }\r\n  if (!response.ok) {\r\n    throw json({ message: \"Failed to void invoice\" }, { status: 500 });\r\n  }\r\n  return redirect(\"/invoice\");\r\n}\r\n"],"names":["action","request","params","token","getAuthToken","id","url","formData","data","voidData","reason","get","fetch","method","headers","Authorization","body","JSON","stringify","response","status","ok","json","message","redirect","invoice","navigation","useNavigation","navigate","useNavigate","useActionData","isSubmitting","state","errors","Object","values","map","err","Form","invoice_number","currency","amount","required","placeholder","name","className","onClick","type","disabled"],"sourceRoot":""}