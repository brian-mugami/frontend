{"version":3,"file":"static/js/317.2e168d95.chunk.js","mappings":"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","sources":["components/SupplierPaymentComponents/SupplierPaymentSearchForm.js","components/SupplierPaymentComponents/PendingSupplierPaymentsList.js","pages/SupplierPaymentPages/NewPaymentsPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Form, useNavigate, useNavigation } from \"react-router-dom\";\r\nimport {\r\n  defer,\r\n  json,\r\n  useLoaderData,\r\n} from \"react-router-dom/dist/umd/react-router-dom.development\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\nimport { MagnifyingGlassIcon } from \"@heroicons/react/24/outline\";\r\n\r\nfunction SupplierPaymentSearchForm({ onSearch }) {\r\n  const navigate = useNavigate();\r\n  const navigation = useNavigation();\r\n  const [searchName, setSearchName] = useState(\"\");\r\n  const isSubmitting = navigation.state === \"submitting\";\r\n  const { suppliers } = useLoaderData();\r\n  const onSearchHandler = (event) => {\r\n    setSearchName(event.target.value);\r\n  };\r\n\r\n  const onSubmitHandler = (event) => {\r\n    event.preventDefault();\r\n    onSearch(searchName);\r\n  };\r\n\r\n  const cancelHandler = () => {\r\n    navigate(\"..\");\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"sm:col-span-4\">\r\n        <Form id=\"search-form\" onSubmit={onSubmitHandler}>\r\n          <label className=\"block text-sm font-medium leading-6 text-gray-900\">\r\n            Search the supplier\r\n          </label>\r\n          <input\r\n            required\r\n            name=\"supplier_name\"\r\n            type=\"text\"\r\n            list=\"options\"\r\n            className=\"block w-half rounded-md border-0 py-1.5 text-gray-900  ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\r\n            placeholder=\"search supplier\"\r\n            value={searchName}\r\n            onChange={onSearchHandler}\r\n          />\r\n          <datalist id=\"options\">\r\n            {suppliers.map((supplier) => (\r\n              <option key={supplier.id} value={supplier.supplier_name} />\r\n            ))}\r\n          </datalist>\r\n\r\n          <div className=\"mt-6 flex items-center justify-end gap-x-6\">\r\n            <button\r\n              onClick={cancelHandler}\r\n              type=\"button\"\r\n              className=\"text-sm font-semibold leading-6 text-gray-900\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isSubmitting || searchName.length === 0}\r\n              className=\"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\r\n            >\r\n              Search\r\n            </button>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default SupplierPaymentSearchForm;\r\n\r\nasync function suppliersLoader() {\r\n  const token = getAuthToken();\r\n  const response = await fetch(\r\n    \"https://flask-inventory.onrender.com/supplier\",\r\n    {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    }\r\n  );\r\n  if (!response.ok) {\r\n    throw json({ message: \"Cant get suppliers\" }, { status: 500 });\r\n  } else {\r\n    const resData = await response.json();\r\n    return resData;\r\n  }\r\n}\r\n\r\nexport async function loader() {\r\n  return defer({\r\n    suppliers: await suppliersLoader(),\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction PendingSupplierPaymentsList({ results, supplier }) {\r\n\r\n  return (\r\n    <div className=\"max-w-screen-lg mx-auto\">\r\n      <h2 className=\"text-lg font-semibold mb-4\"> Search results for \"{supplier}\"</h2>\r\n      <div className=\"shadow border rounded-md\">\r\n        <table className=\"min-w-full divide-y divide-gray-200\">\r\n          <thead className=\"bg-gray-50\">\r\n            <tr>\r\n            <th\r\n                scope=\"col\"\r\n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n              >\r\n                Invoice Number\r\n              </th>\r\n            <th\r\n                scope=\"col\"\r\n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n              >\r\n                Supplier Name\r\n              </th>\r\n              <th\r\n                scope=\"col\"\r\n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n              >\r\n                Invoice Date\r\n              </th>\r\n              <th\r\n                scope=\"col\"\r\n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n              >\r\n                Accounted\r\n              </th>\r\n              <th\r\n                scope=\"col\"\r\n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n              >\r\n                Payment Status\r\n              </th>\r\n              <th\r\n                scope=\"col\"\r\n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n              >\r\n                Balance\r\n              </th>\r\n              <th\r\n                scope=\"col\"\r\n                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n              >\r\n                Paid\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-gray-200\">\r\n            {results.map((invoice) => (\r\n              <tr\r\n                key={invoice.id}\r\n                className=\"hover:bg-gray-100 transition-colors duration-200\"\r\n              >\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  <Link to={`/invoice/${invoice.id}`}>\r\n                    {invoice.invoice_number}\r\n                  </Link>\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  {invoice.supplier.supplier_name}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  {invoice.date}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  {invoice.accounted}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  {invoice.status}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  {invoice.supplier_balance[0].balance}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  {invoice.supplier_balance[0].paid}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                  <button className=\"btn btn-success\">\r\n                    <Link to={`/invoice/${invoice.id}/payment`}> Pay</Link>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PendingSupplierPaymentsList;\r\n","import React, { useState } from \"react\";\r\nimport SupplierPaymentSearchForm from \"../../components/SupplierPaymentComponents/SupplierPaymentSearchForm\";\r\nimport PendingSupplierPaymentsList from \"../../components/SupplierPaymentComponents/PendingSupplierPaymentsList\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\nimport { json, useNavigate } from \"react-router-dom\";\r\n\r\nfunction NewPaymentsPage() {\r\n  const [results, setResults] = useState([]);\r\n  const [supName, setSupName] = useState(\"\");\r\n  const navigate = useNavigate()\r\n\r\n  async function onSearch(supplierName) {\r\n    const token = getAuthToken();\r\n    setSupName(supplierName);\r\n    const response = await fetch(\r\n      \"https://flask-inventory.onrender.com/payment/search/?supplier_name=\" + supplierName,\r\n      {\r\n        method: \"GET\",\r\n        headers: {\r\n          Authorization: \"Bearer \" + token,\r\n          \"Access-Control-Allow-Origin\": \"*\",\r\n        },\r\n      }\r\n    );\r\n    if (response.status === 404) {\r\n        window.alert(\"No such supplier is available. Please try again!!\")\r\n        navigate(\"./\")\r\n    }\r\n    if (!response.ok) {\r\n      throw json({ message: \"No such request\" }, { status: 500 });\r\n    }\r\n    const resData = await response.json();\r\n    if(resData.length === 0){\r\n      window.alert(\"No such supplier has a pending payment!\")\r\n      navigate(\"./\")\r\n    }\r\n    setResults(resData);\r\n \r\n    return results;\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <SupplierPaymentSearchForm onSearch={onSearch} />\r\n      {results.length > 0 && <PendingSupplierPaymentsList results={results} supplier={supName} />}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default NewPaymentsPage;\r\n"],"names":["suppliersLoader","token","getAuthToken","fetch","method","headers","Authorization","response","ok","json","message","status","resData","loader","defer","suppliers","onSearch","navigate","useNavigate","navigation","useNavigation","useState","searchName","setSearchName","isSubmitting","state","useLoaderData","className","id","onSubmit","event","preventDefault","required","name","type","list","placeholder","value","onChange","target","map","supplier","supplier_name","onClick","disabled","length","results","scope","invoice","to","invoice_number","date","accounted","supplier_balance","balance","paid","setResults","supName","setSupName","supplierName","window","alert","SupplierPaymentSearchForm"],"sourceRoot":""}