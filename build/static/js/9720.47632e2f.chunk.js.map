{"version":3,"file":"static/js/9720.47632e2f.chunk.js","mappings":"wMAsGA,UA7FA,WACE,IAAMA,GAAUC,EAAAA,EAAAA,oBAAmB,kBAC7BC,GAAWC,EAAAA,EAAAA,eAGXC,EAAoC,gBAFvBC,EAAAA,EAAAA,iBAEaC,MAChC,GAAwBC,EAAAA,EAAAA,UAAS,MAAK,eAA/BC,EAAI,KAAEC,EAAO,KAUdC,EAAY,yCAAG,WAAOC,GAAK,gFAKD,OAJ9BA,EAAMC,iBACAC,GAAQC,EAAAA,EAAAA,iBAERC,EAAW,IAAIC,UACZC,OAAO,OAAQT,GAAM,kBAGLU,MAAM,mBAAD,OACPlB,EAAQmB,IAC3B,CACEC,OAAQ,OACRC,QAAS,CACPC,cAAe,UAAYT,GAE7BU,KAAMR,IAER,KAAD,EACuB,OAVlBS,EAAQ,QAUDC,QACXC,OAAOC,MAAM,qCAEXH,EAASI,GACOF,OAAOG,QACvB,uEAGA3B,EAAS,MAGXwB,OAAOC,MAAM,oBACd,kDAEDD,OAAOC,MAAM,gBAAgB,EAAD,IAAS,0DAExC,gBAlCiB,sCAoClB,OACE,SAAC,IAAK,WACJ,iBAAMG,SAAUpB,EAAa,UAC3B,iBAAKqB,UAAU,OAAM,WACnB,kBAAOC,QAAQ,mBAAmBD,UAAU,aAAY,UACtD,eAAIA,UAAU,kDAAiD,SAAC,0BAIlE,kBACEE,KAAK,OACLF,UAAU,qDACVG,KAAK,OACLf,GAAG,mBACHgB,SA1De,SAACxB,GACxBF,EAAQE,EAAMyB,OAAOC,MAAM,GAC7B,EAyDUC,UAAQ,KAEV,mBACA,iBAAKP,UAAU,YAAW,WAE1B,mBACEA,UAAU,kNACVG,KAAK,SACLK,SAAUnC,EAAa,SAEtBA,EAAe,aAAe,YAEjC,mBACEoC,QApEV,WACEtC,EAAS,KACX,EAmEUgC,KAAK,SACLH,UAAU,gDAA+C,SAC1D,oBAQX,C","sources":["pages/InvoicePages/InvoiceAttachmentPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Modal from \"../../components/UIComponents/Modal\";\r\nimport { getAuthToken } from \"../../util/Auth\";\r\nimport {\r\n  useNavigate,\r\n  useNavigation,\r\n  useRouteLoaderData,\r\n} from \"react-router-dom/dist/umd/react-router-dom.development\";\r\n\r\nfunction InvoiceAttachmentPage() {\r\n  const invoice = useRouteLoaderData(\"invoice-detail\");\r\n  const navigate = useNavigate();\r\n  const navigation = useNavigation();\r\n\r\n  const isSubmitting = navigation.state === \"submitting\";\r\n  const [file, setFile] = useState(null);\r\n\r\n  const handleFileChange = (event) => {\r\n    setFile(event.target.files[0]);\r\n  };\r\n\r\n  function cancelHandler() {\r\n    navigate(\"..\");\r\n  }\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const token = getAuthToken();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `/invoice/upload/${invoice.id}`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n          body: formData,\r\n        }\r\n      );\r\n      if (response.status === 400) {\r\n        window.alert(\"Only PDF attachment are allowed!!\");\r\n      }\r\n      if (response.ok) {\r\n        const confirmed = window.confirm(\r\n          \"File uploaded successfully! Do you want to go to the invoice page?\"\r\n        );\r\n        if (confirmed) {\r\n          navigate(\"..\");\r\n        }\r\n      } else {\r\n        window.alert(\"failed to upload\");\r\n      }\r\n    } catch (error) {\r\n      window.alert(\"Network error\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"formFileMultiple\" className=\"form-label\">\r\n            <h2 className=\"text-base font-semibold leading-7 text-gray-900\">\r\n              Invoice attachment\r\n            </h2>\r\n          </label>\r\n          <input\r\n            name=\"file\"\r\n            className=\"form-control mt-1 text-sm leading-6 text-gray-600 \"\r\n            type=\"file\"\r\n            id=\"formFileMultiple\"\r\n            onChange={handleFileChange}\r\n            required\r\n          />\r\n          <br />\r\n          <div className=\"space-x-4\">\r\n\r\n          <button\r\n            className=\"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\r\n            type=\"submit\"\r\n            disabled={isSubmitting}\r\n          >\r\n            {isSubmitting ? \"Submitting\" : \"Submit\"}\r\n          </button>\r\n          <button\r\n            onClick={cancelHandler}\r\n            type=\"button\"\r\n            className=\"text-sm font-semibold leading-6 text-gray-900\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default InvoiceAttachmentPage;\r\n"],"names":["invoice","useRouteLoaderData","navigate","useNavigate","isSubmitting","useNavigation","state","useState","file","setFile","handleSubmit","event","preventDefault","token","getAuthToken","formData","FormData","append","fetch","id","method","headers","Authorization","body","response","status","window","alert","ok","confirm","onSubmit","className","htmlFor","name","type","onChange","target","files","required","disabled","onClick"],"sourceRoot":""}