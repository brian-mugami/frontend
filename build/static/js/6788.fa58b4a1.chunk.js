(self.webpackChunkfront=self.webpackChunkfront||[]).push([[6788],{26788:function(e,s,r){"use strict";r.r(s),r.d(s,{action:function(){return g},default:function(){return p}});var t=r(74165),a=r(15861),n=r(29439),i=r(17619),l=(r(72791),r(57689)),o=r(11087),d=r(20539),u=r(80184);function c(){var e=(0,l.useActionData)(),s=(0,o.lr)(),r=(0,n.Z)(s,1)[0],t="submitting"===(0,l.useNavigation)().state,a="login"===r.get("mode"),c="sign-up-admin-user"===r.get("mode");return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"forms",children:[c&&(0,u.jsx)("div",{className:"flex min-h-full items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,u.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("img",{className:"mx-auto h-24 w-auto",src:d,alt:"Your Company"}),(0,u.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:a?"Log in":"Create a new user"}),e&&e.errors&&(0,u.jsx)("ul",{children:Object.values(e.errors).map((function(e){return(0,u.jsx)("li",{children:e},e)}))}),e&&e.message&&(0,u.jsx)("p",{children:e.message})]}),(0,u.jsxs)(o.l0,{className:"mt-8 space-y-6",method:"POST",children:[(0,u.jsx)("input",{type:"hidden",name:"remember",defaultValue:"true"}),(0,u.jsxs)("div",{className:"-space-y-px rounded-md shadow-sm",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"name",className:"sr-only",children:"First Name"}),(0,u.jsx)("input",{id:"fname",name:"fname",type:"name",autoComplete:"name",required:!0,className:"relative block w-full rounded-t-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"First Name"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"name",className:"sr-only",children:"Last Name"}),(0,u.jsx)("input",{id:"lname",name:"lname",type:"name",autoComplete:"name",required:!0,className:"relative block w-full rounded-t-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Last Name"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,u.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"relative block w-full rounded-t-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Email address"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,u.jsx)("input",{id:"password1",name:"password1",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full rounded-b-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Password"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Retype-Password"}),(0,u.jsx)("input",{id:"password2",name:"password2",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full rounded-b-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Retype Password"})]})]}),(0,u.jsx)("div",{className:"flex items-center justify-between"}),(0,u.jsx)("div",{children:(0,u.jsxs)("button",{type:"submit",className:"group relative flex w-full justify-center rounded-md bg-indigo-600 py-2 px-3 text-sm font-semibold text-white hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:t,children:[(0,u.jsx)(o.rU,{to:"?mode=".concat(a?"register":"login"),children:(0,u.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,u.jsx)(i,{className:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400","aria-hidden":"true"})})}),t?"Registering...":"Register"]})})]})]})}),a&&(0,u.jsx)("div",{className:"flex min-h-full items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,u.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("img",{className:"mx-auto h-24  w-auto",src:d,alt:"Your Company"}),(0,u.jsx)("h2",{className:"mt-2 text-center text-3xl font-bold tracking-tight text-gray-900",children:a?"Log in":"Create a new user"}),e&&e.errors&&(0,u.jsx)("ul",{children:Object.values(e.errors).map((function(e){return(0,u.jsx)("li",{children:e},e)}))}),e&&e.message&&(0,u.jsx)("p",{children:e.message})]}),(0,u.jsxs)(o.l0,{className:"mt-8 space-y-6",method:"POST",children:[(0,u.jsx)("input",{type:"hidden",name:"remember",defaultValue:"true"}),(0,u.jsxs)("div",{className:"-space-y-px rounded-md shadow-sm",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,u.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"relative block w-full rounded-t-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Email address"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,u.jsx)("input",{id:"password3",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full rounded-b-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Password"})]})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"}),(0,u.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,u.jsx)("div",{className:"text-sm",children:(0,u.jsx)(o.rU,{to:"/reset",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Forgot your password?"})})]}),(0,u.jsx)("div",{children:(0,u.jsxs)("button",{type:"submit",className:"group relative flex w-full justify-center rounded-md bg-indigo-600 py-2 px-3 text-sm font-semibold text-white hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:t,children:[(0,u.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,u.jsx)(i,{className:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400","aria-hidden":"true"})}),t?"Submitting...":"Submit"]})})]})]})})]})})}var m=r(63924);function g(e){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,t.Z)().mark((function e(s){var r,a,n,i,l,o,d,u,c,g,x,p;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.request,a=new URL(r.url).searchParams,"login"===(n=a.get("mode")||"login")||"sign-up-admin-user"===n){e.next=5;break}throw(0,m.json)({message:"Route not found."},{status:404});case 5:return e.next=7,r.formData();case 7:if(i=e.sent,l={first_name:i.get("fname"),last_name:i.get("lname"),email:i.get("email"),password1:i.get("password1"),password2:i.get("password2")},o={email:i.get("email"),password:i.get("password")},"login"!==n){e.next=33;break}return e.next=13,fetch("https://inventory-accounting.onrender.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 13:if(401!==(d=e.sent).status){e.next=16;break}return e.abrupt("return",d);case 16:if(500!==d.status){e.next=18;break}return e.abrupt("return",d);case 18:if(400!==d.status){e.next=20;break}return e.abrupt("return",d);case 20:if(d){e.next=22;break}return e.abrupt("return",(0,m.json)({message:"Could not authenticate user"},{status:500}));case 22:return e.next=24,d.json();case 24:return u=e.sent,c=u.access_token,g=u.refresh_token,localStorage.setItem("access_token",c),localStorage.setItem("refresh_token",g),(x=new Date).setHours(x.getHours()+24),localStorage.setItem("expiration",x.toISOString()),e.abrupt("return",(0,m.redirect)("/home"));case 33:if("sign-up-admin-user"!==n){e.next=48;break}return e.next=36,fetch("/register/user/admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});case 36:if(409!==(p=e.sent).status){e.next=39;break}return e.abrupt("return",p);case 39:if(400!==p.status){e.next=41;break}return e.abrupt("return",p);case 41:if(500!==p.status){e.next=43;break}return e.abrupt("return",p);case 43:if(417!==p.status){e.next=45;break}return e.abrupt("return",p);case 45:if(p.ok){e.next=47;break}throw(0,m.json)({message:"Could not register user"},{status:500});case 47:return e.abrupt("return",(0,m.redirect)("/auth?mode=login"));case 48:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(){return(0,u.jsx)(c,{})}},17619:function(e,s,r){var t=r(70215).default,a=["title","titleId"],n=r(72791);var i=n.forwardRef((function(e,s){var r=e.title,i=e.titleId,l=t(e,a);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":i},l),r?n.createElement("title",{id:i},r):null,n.createElement("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"}))}));e.exports=i}}]);
//# sourceMappingURL=6788.fa58b4a1.chunk.js.map