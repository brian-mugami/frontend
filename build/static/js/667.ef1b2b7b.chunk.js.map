{"version":3,"file":"static/js/667.ef1b2b7b.chunk.js","mappings":"4NA2DO,SAAeA,EAAO,GAAD,+BA8B3B,8CA9BM,wGAG4B,OAHJC,EAAO,EAAPA,QAASC,EAAM,EAANA,OAChCC,GAAQC,EAAAA,EAAAA,MACRC,EAAKH,EAAOG,GACZC,EAAM,iBAAmBD,EAAG,EAAD,OAEdJ,EAAQM,WAAU,OAIpC,OAJKC,EAAI,OAEJC,EAAW,CACfC,OAAQF,EAAKG,IAAI,WAClB,UACsBC,MAAMN,EAAK,CAChCO,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAYZ,EAC3B,8BAA+B,KAEjCa,KAAMC,KAAKC,UAAUT,KACpB,KAAD,GARY,GAUU,OAVlBU,EAAQ,QAUDC,OAAc,0CAClBD,GAAQ,WAEO,MAApBA,EAASC,OAAc,0CAClBD,GAAQ,WAEZA,EAASE,GAAG,CAAD,sBACRC,EAAAA,EAAAA,MAAK,CAAEC,QAAS,0BAA4B,CAAEH,OAAQ,MAAO,KAAD,6BAE7DI,EAAAA,EAAAA,UAAS,aAAW,6CAC5B,sBAhCD,UA7CA,SAAyB,GAAc,IAAZC,EAAO,EAAPA,QACnBC,GAAaC,EAAAA,EAAAA,iBACbC,GAAWC,EAAAA,EAAAA,eACXrB,GAAOsB,EAAAA,EAAAA,iBAEPC,EAAoC,eAArBL,EAAWM,MAIhC,OACE,UAAC,IAAK,WACHxB,GAAQA,EAAKyB,SACZ,wBACGC,OAAOC,OAAO3B,EAAKyB,QAAQG,KAAI,SAACC,GAAG,OAClC,wBAAeA,GAANA,EAAe,MAI7B7B,GAAQA,EAAKe,UAAW,uBAAIf,EAAKe,WAClC,UAAC,EAAAe,KAAI,CAACzB,OAAO,OAAM,WACjB,2BAAK,+CAC0C,KAC7C,uBAAIY,EAAQc,iBAAmB,aAAW,KAC1C,yBACGd,EAAQe,SAAS,IAAEf,EAAQgB,cAGhC,0BACE,kBAAOC,UAAQ,EAACC,YAAY,cAAcC,KAAK,cAEjD,mBAAQC,UAAU,kBAAkBC,QAxB1C,WACElB,EAAS,KACX,EAsBiE,SAAC,OAElD,KACV,mBACEiB,UAAU,oBACVE,KAAK,SACLC,SAAUjB,EAAa,SAEtBA,EAAe,UAAY,cAKtC,C,yEC1CA,UATA,WACI,IAAMN,GAAUwB,EAAAA,EAAAA,oBAAmB,kBACrC,OACE,SAAC,WAAc,WACX,SAAC,UAAe,CAACxB,QAASA,KAGlC,C","sources":["components/InvoiceComponents/InvoiceVoidForm.js","pages/InvoicePages/InvoiceVoidPage.js"],"sourcesContent":["import React from \"react\";\nimport Modal from \"../UIComponents/Modal\";\nimport {\n  Form,\n  json,\n  redirect,\n  useActionData,\n  useNavigate,\n  useNavigation,\n} from \"react-router-dom/dist/umd/react-router-dom.development\";\nimport { getAuthToken } from \"../../util/Auth\";\n\nfunction InvoiceVoidForm({ invoice }) {\n  const navigation = useNavigation();\n  const navigate = useNavigate();\n  const data = useActionData();\n\n  const isSubmitting = navigation.state === \"submitting\";\n  function cancelHandler() {\n    navigate(\"..\");\n  }\n  return (\n    <Modal>\n      {data && data.errors && (\n        <ul>\n          {Object.values(data.errors).map((err) => (\n            <li key={err}>{err}</li>\n          ))}\n        </ul>\n      )}\n      {data && data.message && <p>{data.message}</p>}\n      <Form method=\"post\">\n        <div>\n          Are you sure you want to void invoice number{\" \"}\n          <b>{invoice.invoice_number}</b> of amount{\" \"}\n          <b>\n            {invoice.currency} {invoice.amount}\n          </b>\n        </div>\n        <div>\n          <input required placeholder=\"Void Reason\" name=\"reason\"></input>\n        </div>\n        <button className=\"btn btn-primary\" onClick={cancelHandler}>\n          No\n        </button>{\" \"}\n        <button\n          className=\"btn btn-secondary\"\n          type=\"submit\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? \"Voiding\" : \"Void\"}\n        </button>\n      </Form>\n    </Modal>\n  );\n}\n\nexport default InvoiceVoidForm;\n\nexport async function action({ request, params }) {\n  const token = getAuthToken();\n  const id = params.id;\n  const url = \"/invoice/void/\" + id;\n\n  const data = await request.formData()\n\n  const voidData = {\n    reason: data.get('reason')\n  }\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + token,\n      \"Access-Control-Allow-Origin\": \"*\",\n    },\n    body: JSON.stringify(voidData)\n  });\n\n  if (response.status === 400) {\n    return response;\n  }\n  if (response.status === 404) {\n    return response;\n  }\n  if (!response.ok) {\n    throw json({ message: \"Failed to void invoice\" }, { status: 500 });\n  }\n  return redirect(\"/invoice\");\n}\n","import React from 'react'\nimport InvoiceVoidForm from '../../components/InvoiceComponents/InvoiceVoidForm'\nimport { useRouteLoaderData } from 'react-router-dom/dist/umd/react-router-dom.development'\n\nfunction InvoiceVoidPage() {\n    const invoice = useRouteLoaderData(\"invoice-detail\")\n  return (\n    <React.Fragment>\n        <InvoiceVoidForm invoice={invoice}/>\n    </React.Fragment>\n  )\n}\n\nexport default InvoiceVoidPage"],"names":["action","request","params","token","getAuthToken","id","url","formData","data","voidData","reason","get","fetch","method","headers","Authorization","body","JSON","stringify","response","status","ok","json","message","redirect","invoice","navigation","useNavigation","navigate","useNavigate","useActionData","isSubmitting","state","errors","Object","values","map","err","Form","invoice_number","currency","amount","required","placeholder","name","className","onClick","type","disabled","useRouteLoaderData"],"sourceRoot":""}